{"meta":{"title":"逆旅","subtitle":"人生如逆旅，我亦是行人。","description":"知其白，守其黑，为天下式；","author":"未白","url":"http://example.com","root":"/"},"pages":[{"title":"","date":"2021-03-23T03:35:19.303Z","updated":"2021-03-23T03:35:19.302Z","comments":true,"path":"404.html","permalink":"http://example.com/404.html","excerpt":"","text":"404 | Blog"},{"title":"categories","date":"2021-03-23T09:30:01.000Z","updated":"2021-03-23T09:33:33.836Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"about","date":"2021-03-23T09:28:16.000Z","updated":"2021-03-23T09:28:16.511Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":""},{"title":"标签","date":"2021-03-23T09:29:39.000Z","updated":"2021-03-23T09:34:48.905Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Vue页面优化","slug":"Vue页面优化","date":"2021-04-01T02:57:23.000Z","updated":"2021-04-01T10:26:35.150Z","comments":true,"path":"2021/04/01/Vue页面优化/","link":"","permalink":"http://example.com/2021/04/01/Vue%E9%A1%B5%E9%9D%A2%E4%BC%98%E5%8C%96/","excerpt":"","text":"Vue页面优化 页面载入进度条 nprogress 安装 1npm install --save nprogress 或 yarn add nprogress 使用 :12345678910import NProgress from &#39;nprogress&#39; &#x2F;&#x2F; 引入nprogress插件import &#39;nprogress&#x2F;nprogress.css&#39; &#x2F;&#x2F; 这个nprogress样式必须引入router.beforeEach(() &#x3D;&gt; &#123; NProgress.start();&#125;);router.afterEach(() &#x3D;&gt; &#123; NProgress.done();&#125;); 滚动条美化 12345678910111213141516171819202122232425::-webkit-scrollbar &#123; width: 6px; height: 6px;&#125;::-webkit-scrollbar-track &#123; width: 6px; background: rgba(#101F1C, 0.1); -webkit-border-radius: 2em; -moz-border-radius: 2em; border-radius: 2em;&#125;::-webkit-scrollbar-thumb &#123; background-color: rgba(#101F1C, 0.5); background-clip: padding-box; min-height: 28px; -webkit-border-radius: 2em; -moz-border-radius: 2em; border-radius: 2em;&#125;::-webkit-scrollbar-thumb:hover &#123; background-color: rgba(#101F1C, 1);&#125; 移动端（高度） 100vh === 视口高度 ??? 并不是， 实际上在移动端 100vh === 视口高度 + 浏览器工具栏（地址栏等等）的高度 解决方案： 安装 vh-check npm install vh-check --save12import vhCheck from &#x27;vh-check&#x27;;vhCheck(&#x27;browser-address-bar&#x27;); 定义 CSS Mixin1234@mixin vh($height: 100vh) &#123; height: $height; height: calc(#&#123;$height&#125; - var(--browser-address-bar, 0px));&#125; 全局样式 variable.scss: 全局变量管理 mixins.scss: 全局 Mixins 管理 global.scss: 全局样式 其中 variable.scss 和 mixins.scss 会优先于 global.css 加载12345678910111213// vue.config.jsmodule.exports = &#123; css: &#123; loaderOptions: &#123; sass: &#123; prependData: ` @import &#x27;@/styles/variable.scss&#x27;; @import &#x27;@/styles/mixins.scss&#x27;; `, &#125;, &#125;, &#125;,&#125; 组件库 按需加载 Ant Design Vue 的组件样式1234567// babel.config.jsmodule.exports = &#123; presets: [&#x27;@vue/app&#x27;], // presets: [&#x27;@vue/cli-plugin-babel/preset&#x27;], plugins: [[&#x27;import&#x27;, &#123; libraryName: &#x27;ant-design-vue&#x27;, libraryDirectory: &#x27;es&#x27;, style: true &#125;]]&#125; 去掉无用的图标 创建icons.js 文件来管理Ant Design Vue图标12&#x2F;&#x2F; @&#x2F;src&#x2F;assets&#x2F;icons.jsexport &#123; default as LoadingOutline &#125; from &#39;@ant-design&#x2F;icons&#x2F;lib&#x2F;outline&#x2F;LoadingOutline&#39;; 配置vue.config.js 引入文件12345678910// vue.config.jsmodule.exports = &#123; configureWebpack: &#123; resolve: &#123; alias: &#123; &#x27;@ant-design/icons/lib/dist$&#x27;: path.resolve(__dirname, &#x27;./src/assets/icons.js&#x27;), &#125;, &#125;,&#125;,&#125; Moment 多国语, 只保留 zh-cn 语言包12345678// vue.config.jsmodule.exports = &#123; chainWebpack: (config) =&gt; &#123; config .plugin(&#x27;ContextReplacementPlugin&#x27;) .use(webpack.ContextReplacementPlugin, [/moment[/]locale$/, /zh-cn/]); &#125;,&#125; icon （雪碧图） 自动注册 Svg 图标，首先需要对 @/assets/icons 文件夹下的 svg 图标进行自动注册，需要对 webpack 和 svg-sprite-loader 进行了相关设置，文件全部打包成 svg-sprite。 12345678910111213141516module.exports = &#123; chainWebpack: (config) =&gt; &#123; config.module .rule(&#x27;svg&#x27;) .exclude.add(resolve(&#x27;src/assets/icons&#x27;)) .end(); config.module .rule(&#x27;icons&#x27;) .test(/.svg$/) .include.add(resolve(&#x27;src/assets/icons&#x27;)) .end() .use(&#x27;svg-sprite-loader&#x27;) .loader(&#x27;svg-sprite-loader&#x27;); &#125;,&#125; 写一个全局用的 Vue 组件 : 1234// @/components/m-svg/index.jsconst requireAll = (requireContext) =&gt; requireContext.keys().map(requireContext);const req = require.context(&#x27;@/assets/icons&#x27;, false, /.svg$/);requireAll(req); 1234567891011121314151617181920212223242526272829@/components/m-svg/index.vue&lt;template&gt; &lt;svg class=&quot;mw-svg&quot; aria-hidden=&quot;true&quot;&gt; &lt;use :xlink:href=&quot;iconName&quot;&gt;&lt;/use&gt; &lt;/svg&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;m-svg&#x27;, props: &#123; name: &#123; type: String, default: &#x27;&#x27; &#125;, &#125;, computed: &#123; iconName() &#123; return `#$&#123;this.name&#125;`; &#125;, &#125;,&#125;;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.mw-svg &#123; width: 1.4em; height: 1.4em; fill: currentColor; overflow: hidden; line-height: 1em; display: inline-block;&#125;&lt;/style&gt; 参数 name 类型：String 默认值：null 说明：放置在 @/assets/icons 文件夹下的文件名 样式 图标的大小可以通过 width + height 属性改变。 通过改变 font-size 属性改变，宽高 = font-zise * 1.4 跨域问题 12345678910111213&#x2F;&#x2F; vue.config.jsdevServer: &#123; proxy: &#123; &#39;&#x2F;api&#39;: &#123; target: &#39;http:&#x2F;&#x2F;47.100.186.132&#x2F;your-path&#x2F;api&#39;, ws: true, changeOrigin: true, pathRewrite: &#123; &#39;^&#x2F;api&#39;: &#39;&#39; &#125; &#125; &#125;&#125; 路由 Layout frameIn：基于 BasicLayout，通常需要登录或权限认证的路由。 frameOut：不需要动态判断权限的路由，如登录页或通用页面。 errorPage：例如404。 权限验证, 通过获取当前用户的权限去比对路由表，生成当前用户具的权限可访问的路由表，通过 router.addRoutes 动态挂载到 router 上。 判断页面是否需要登陆状态，需要则跳转到 /user/login 本地存储中不存在 token 则跳转到 /user/login 如果存在 token，用户信息不存在，自动调用 vuex ‘/system/user/getInfo’ 在路由中，集成了权限验证的功能，需要为页面增加权限时，在 meta 下添加相应的 key: auth 类型：Boolean 说明：当 auth 为 true 时，此页面需要进行登陆权限验证，只针对 frameIn 路由有效。 permissions 类型：Object 说明：permissions 每一个 key 对应权限功能的验证，当 key 的值为 true 时，代表具有权限，若 key 为 false，配合 v-permission 指令，可以隐藏相应的 DOM。123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657import router from &#x27;@/router&#x27;;import store from &#x27;@/store&#x27;;import storage from &#x27;store&#x27;;import util from &#x27;@/libs/utils&#x27;;// 进度条import NProgress from &#x27;nprogress&#x27;;import &#x27;nprogress/nprogress.css&#x27;;const loginRoutePath = &#x27;/user/login&#x27;;const defaultRoutePath = &#x27;/home&#x27;;/** * 路由拦截 * 权限验证 */router.beforeEach(async (to, from, next) =&gt; &#123; // 进度条 NProgress.start(); // 验证当前路由所有的匹配中是否需要有登录验证的 if (to.matched.some((r) =&gt; r.meta.auth)) &#123; // 是否存有token作为验证是否登录的条件 const token = storage.get(&#x27;ACCESS_TOKEN&#x27;); if (token &amp;&amp; token !== &#x27;undefined&#x27;) &#123; // 是否处于登录页面 if (to.path === loginRoutePath) &#123; next(&#123; path: defaultRoutePath &#125;); // 查询是否储存用户信息 &#125; else if (Object.keys(store.state.system.user.info).length === 0) &#123; store.dispatch(&#x27;system/user/getInfo&#x27;).then(() =&gt; &#123; next(); &#125;); &#125; else &#123; next(); &#125; &#125; else &#123; // 没有登录的时候跳转到登录界面 // 携带上登陆成功之后需要跳转的页面完整路径 next(&#123; name: &#x27;Login&#x27;, query: &#123; redirect: to.fullPath, &#125;, &#125;); NProgress.done(); &#125; &#125; else &#123; // 不需要身份校验 直接通过 next(); &#125;&#125;);router.afterEach((to) =&gt; &#123; // 进度条 NProgress.done(); util.title(to.meta.title);&#125;); 构建优化 包分析工具 1234567891011const WebpackBundleAnalyzer = require(&#x27;webpack-bundle-analyzer&#x27;);module.exports = &#123; chainWebpack: (config) =&gt; &#123; if (process.env.use_analyzer) &#123; config .plugin(&#x27;webpack-bundle-analyzer&#x27;) .use(WebpackBundleAnalyzer.BundleAnalyzerPlugin); &#125; &#125;,&#125;; 开启 Gzip 12345chainWebpack: (config) =&gt; &#123; config .plugin(&#x27;CompressionPlugin&#x27;) .use(CompressionPlugin, []);&#125;, 路由懒加载 1234567&#123; path: &#x27;home&#x27;, name: &#x27;Home&#x27;, component: () =&gt; import( /* webpackChunkName: &quot;home&quot; */ &#x27;@/views/home/index.vue&#x27; ),&#125;","categories":[{"name":"技术","slug":"技术","permalink":"http://example.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"前端","slug":"前端","permalink":"http://example.com/tags/%E5%89%8D%E7%AB%AF/"},{"name":"Vue","slug":"Vue","permalink":"http://example.com/tags/Vue/"}]},{"title":"工具类项目及网站","slug":"工具类项目及网站","date":"2021-03-31T08:46:34.000Z","updated":"2021-03-31T10:16:59.856Z","comments":true,"path":"2021/03/31/工具类项目及网站/","link":"","permalink":"http://example.com/2021/03/31/%E5%B7%A5%E5%85%B7%E7%B1%BB%E9%A1%B9%E7%9B%AE%E5%8F%8A%E7%BD%91%E7%AB%99/","excerpt":"工具集 codeIf 变量命名智能推荐（支持中文） Github地址","text":"工具集 codeIf 变量命名智能推荐（支持中文） Github地址 regexr 正则表达式验证匹配 官网 any-rule 正则表达式库 可以直接安装到Vscode Github地址 CSS Sprites Generato 多张图片合成雪碧图，并生成对应 css 官网 gitignore 根据选择会去生成 .gitignore 文件 官网 网站集 codesandbox 在线代码编辑器 官网 docschina 印象中文，为 Web 前端开发人员提供优质中文文档 官网 mdnice 使 markdown 语法更加美观 官网","categories":[{"name":"技术","slug":"技术","permalink":"http://example.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"前端","slug":"前端","permalink":"http://example.com/tags/%E5%89%8D%E7%AB%AF/"},{"name":"工具","slug":"工具","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7/"},{"name":"网站","slug":"网站","permalink":"http://example.com/tags/%E7%BD%91%E7%AB%99/"}]},{"title":"知白守黑","slug":"知白守黑","date":"2021-03-24T07:02:50.000Z","updated":"2021-03-24T09:35:42.422Z","comments":true,"path":"2021/03/24/知白守黑/","link":"","permalink":"http://example.com/2021/03/24/%E7%9F%A5%E7%99%BD%E5%AE%88%E9%BB%91/","excerpt":"知其白，守其黑，为天下式；","text":"知其白，守其黑，为天下式； 知其雄，守其雌，为天下谿；为天下谿，常德不离，复归于婴儿。知其白，守其黑，为天下式；为天下式，常德不忒，复归於无极。知其荣，守其辱，为天下谷；为天下谷，常德乃足，复归于朴。《道德经·第二十八章》","categories":[{"name":"随笔","slug":"随笔","permalink":"http://example.com/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"生活","slug":"生活","permalink":"http://example.com/tags/%E7%94%9F%E6%B4%BB/"}]},{"title":"三月的诗","slug":"三月的诗","date":"2021-03-23T07:58:30.000Z","updated":"2021-04-01T02:16:27.206Z","comments":true,"path":"2021/03/23/三月的诗/","link":"","permalink":"http://example.com/2021/03/23/%E4%B8%89%E6%9C%88%E7%9A%84%E8%AF%97/","excerpt":"孤山寺北贾亭西，水面初平云脚低。 几处早莺争暖树，谁家新燕啄春泥。 乱花渐欲迷人眼，浅草才能没马蹄。 最爱湖东行不足，绿杨阴里白沙堤。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;——唐·白居易《钱塘湖春行》","text":"孤山寺北贾亭西，水面初平云脚低。 几处早莺争暖树，谁家新燕啄春泥。 乱花渐欲迷人眼，浅草才能没马蹄。 最爱湖东行不足，绿杨阴里白沙堤。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;——唐·白居易《钱塘湖春行》 闻道春还未相识，走傍寒梅访消息。 昨夜东风入武阳，陌头杨柳黄金色。 碧水浩浩云茫茫，美人不来空断肠。 预拂青山一片石，与君连日醉壶觞。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;——唐·李白《早春寄王汉阳 》","categories":[{"name":"随笔","slug":"随笔","permalink":"http://example.com/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"生活","slug":"生活","permalink":"http://example.com/tags/%E7%94%9F%E6%B4%BB/"},{"name":"诗句","slug":"诗句","permalink":"http://example.com/tags/%E8%AF%97%E5%8F%A5/"}]}],"categories":[{"name":"技术","slug":"技术","permalink":"http://example.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"随笔","slug":"随笔","permalink":"http://example.com/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"前端","slug":"前端","permalink":"http://example.com/tags/%E5%89%8D%E7%AB%AF/"},{"name":"Vue","slug":"Vue","permalink":"http://example.com/tags/Vue/"},{"name":"工具","slug":"工具","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7/"},{"name":"网站","slug":"网站","permalink":"http://example.com/tags/%E7%BD%91%E7%AB%99/"},{"name":"生活","slug":"生活","permalink":"http://example.com/tags/%E7%94%9F%E6%B4%BB/"},{"name":"诗句","slug":"诗句","permalink":"http://example.com/tags/%E8%AF%97%E5%8F%A5/"}]}